{{ $show_announcement := site.Params.header.navbar.show_announcement | default false }}
{{ if $show_announcement }}
<style>
  /* å…¬å‘Šæ çš„æ ·å¼ */
  .announcement-bar {
    background: linear-gradient(90deg, #D4EDDA, #A8E6CF); /* æŸ”å’Œçš„æ¸å˜ç»¿ */
    color: #155724;
    text-align: center;
    padding: 12px 20px;
    font-size: 16px;
    font-weight: bold;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    z-index: 1000;
    box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1); /* æ·»åŠ è½»å¾®é˜´å½± */
    border-bottom: 3px solid #28A745; /* ç»¿è‰²å¼ºè°ƒçº¿ */
    border-radius: 0 0 10px 10px; /* åœ†è§’ */
}

  .announcement-bar button {
    background-color: transparent;
    border: none;
    color: #721c24;
    font-size: 18px;
    font-weight: bold;
    cursor: pointer;
    position: absolute;
    right: 10px;
    top: 10px;
  }
  .navbar {
      margin-top: 100px;
      transition: margin-top 0.3s ease; /* æ·»åŠ è¿‡æ¸¡æ•ˆæœ */
    }
</style>
</head>
<!-- å…¬å‘Šæ  -->

  <div class="announcement-bar" id="announcement-bar">
    <span>
      <strong style="font-size: 18px; color: #D8000C;">ğŸ“¢ Recruiting Now!</strong><br>
      DACN lab is looking for <strong>highly motivated postdoctoral researchers</strong> to join our team. <br>
      ğŸš« <span style="color: #A94442;">No open Ph.D. positions for 2026.</span> <br>
      âœ… Research Assistants (RAs) are welcome to inquire!  
    </span>
    <button class="close-btn" onclick="closeAnnouncement()">âœ–</button>
  </div>
{{ end }}

<div class="page-header header--fixed headroom headroom--top headroom--not-bottom">
  <header>
    <nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
      <div class="container-xl">
        <div class="d-none d-lg-inline-flex">
          <a class="navbar-brand" href="/">Yujia Peng PKU</a>
        </div>
        <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="Toggle navigation">
          <span><i class="fas fa-bars"></i></span>
        </button>
        <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
          <a class="navbar-brand" href="/">Yujia Peng PKU</a>
        </div>
        <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">
          <ul class="navbar-nav d-md-inline-flex">
            {{- range site.Menus.main }}
            <li class="nav-item">
              <a class="nav-link " href="{{ .URL | relLangURL }}" data-link="{{ .Name }}"><span>{{- .Name -}}</span></a>
            </li>
            {{- end -}}
          </ul>
        </div>

        <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
          <li class="nav-item">
            <a class="nav-link js-search" href="#" aria-label="Search"><i class="fas fa-search" aria-hidden="true"></i></a>
          </li>
          <li class="nav-item dropdown theme-dropdown">
            <a href="#" class="nav-link" data-toggle="dropdown" aria-haspopup="true" aria-label="Display preferences">
              <i class="fas fa-moon" aria-hidden="true"></i>
            </a>
            <div class="dropdown-menu">
              <a href="#" class="dropdown-item js-set-theme-light">
                <span>Light</span>
              </a>
              <a href="#" class="dropdown-item js-set-theme-dark">
                <span>Dark</span>
              </a>
              <a href="#" class="dropdown-item js-set-theme-auto dropdown-item-active">
                <span>Automatic</span>
              </a>
            </div>
          </li>
        </ul>
      </div>
    </nav>
  </header>
</div>

<script>
  // æ£€æŸ¥å…¬å‘Šæ æ˜¯å¦å·²å…³é—­è¿‡ï¼Œå¹¶ä¸”æ˜¯å¦è¶…è¿‡1å¤©
  const closeTime = localStorage.getItem('announcementCloseTime');
  const currentTime = new Date().getTime(); // å½“å‰æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰

  if (closeTime) {
    // å¦‚æœå­˜åœ¨å…³é—­æ—¶é—´ï¼Œè®¡ç®—è·ç¦»å½“å‰æ—¶é—´çš„å·®å€¼
    const timeDifference = currentTime - closeTime;

    // å¦‚æœè·ç¦»å…³é—­æ—¶é—´è¶…è¿‡1å¤©ï¼ˆ86400000 æ¯«ç§’ï¼‰ï¼Œåˆ™é‡æ–°æ˜¾ç¤ºå…¬å‘Šæ 
    if (timeDifference < 86400000) {
      // å¦‚æœæ²¡æœ‰è¶…è¿‡1å¤©ï¼Œåˆ™éšè—å…¬å‘Šæ 
      document.getElementById('announcement-bar').style.display = 'none';
      document.getElementById('navbar-main').style.marginTop = '0px'; // éšè—å…¬å‘Šæ åï¼Œè°ƒæ•´å¯¼èˆªæ çš„ä¸Šè¾¹è·
    }
  }

  // å…³é—­å…¬å‘Šæ å¹¶è®¾ç½®æ ‡è®°
  function closeAnnouncement() {
    const currentTime = new Date().getTime(); // è·å–å½“å‰æ—¶é—´

    // ä¿å­˜å…¬å‘Šæ å…³é—­æ—¶é—´
    localStorage.setItem('announcementCloseTime', currentTime);

    // éšè—å…¬å‘Šæ 
    document.getElementById('announcement-bar').style.display = 'none';

    // è°ƒæ•´å¯¼èˆªæ çš„ä¸Šè¾¹è·ï¼Œå»æ‰å…¬å‘Šæ æ‰€å ç©ºé—´
    document.getElementById('navbar-main').style.marginTop = '0px';
  }
</script>
<script>
  // åŠ¨æ€è®¾ç½®å¯¼èˆªæ é—´è·çš„å‡½æ•°
  function adjustNavbarMargin() {
    const announcementBar = document.getElementById('announcement-bar');
    const navbar = document.getElementById('navbar-main');
    
    if (announcementBar && navbar) {
      // è·å–å…¬å‘Šæ çš„å®é™…é«˜åº¦
      const announcementHeight = announcementBar.offsetHeight;
      
      // è®¾ç½®å¯¼èˆªæ çš„é—´è·
      navbar.style.marginTop = `${announcementHeight}px`;
    }
  }

  // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œ
  document.addEventListener('DOMContentLoaded', function() {
    // åˆå§‹è°ƒæ•´
    adjustNavbarMargin();
    
    // çª—å£å˜åŒ–æ—¶é‡æ–°è°ƒæ•´ï¼ˆå¯é€‰ï¼‰
    window.addEventListener('resize', adjustNavbarMargin);
  });

  // å…³é—­å…¬å‘Šæ æ—¶ç§»é™¤é—´è·
  function closeAnnouncement() {
    const currentTime = new Date().getTime();
    localStorage.setItem('announcementCloseTime', currentTime);
    
    const announcementBar = document.getElementById('announcement-bar');
    const navbar = document.getElementById('navbar-main');
    
    if (announcementBar) announcementBar.style.display = 'none';
    if (navbar) navbar.style.marginTop = '0';
  }
</script>
